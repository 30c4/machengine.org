<!doctype html><html><head><link rel=stylesheet href=https://machengine.org/next/layouts/default.5a2984849ab54d0815db4053f7577d95f908a85a1cefad99848234ec223ced0c.css><link rel=icon type=image/x-icon href=https://machengine.org/next/favicon.ico><link rel=stylesheet href=https://machengine.org/next/assets/font/stylesheet.css><link rel=stylesheet href=https://machengine.org/next/assets/font/inter/inter.css><script async defer data-domain=hexops.com src=https://machengine.org/next/opendata.js></script><meta charset=utf-8><title>Getting started - Mach core | Mach engine - game engine & graphics toolkit for the future</title><link rel=canonical href=https://machengine.org/next/core/getting-started/><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noindex"><meta property="og:title" content="Getting started - Mach core"><meta property="og:description" content="Getting Started with Mach core Here you will learn how to use mach-core in your own project/repository. If you haven&rsquo;t already, check out the examples as those describe how to actually use Mach core&rsquo;s APIs, this page just describes project setup.
Mach is now using the Zig package manager Note: Mach has recently been updated to make use of the experimental Zig package manager, although it cannot yet be used for all our dependencies due to some bugs with it."><meta property="og:type" content="article"><meta property="og:url" content="https://machengine.org/next/core/getting-started/"><meta property="article:section" content="core"><meta name=twitter:card content="summary"><meta name=twitter:title content="Getting started - Mach core"><meta name=twitter:description content="Getting Started with Mach core Here you will learn how to use mach-core in your own project/repository. If you haven&rsquo;t already, check out the examples as those describe how to actually use Mach core&rsquo;s APIs, this page just describes project setup.
Mach is now using the Zig package manager Note: Mach has recently been updated to make use of the experimental Zig package manager, although it cannot yet be used for all our dependencies due to some bugs with it."></head><body><div class=navbar><div class=content><a href=https://machengine.org/next/ class=logo><div class=img></div></a><div><a href=https://machengine.org/next/about class="item glass-link">about</a>
<a href=https://github.com/sponsors/slimsag class="item glass-link">donate</a>
<a href=https://devlog.hexops.com/categories/mach/ class="item glass-link">devlog</a>
<a href=https://github.com/hexops/mach class="svg-item glass-link"><img alt=GitHub class=svg-icon src=https://machengine.org/next/img/github.svg></a>
<a href=https://discord.gg/XNG3NZgCqp class="svg-item glass-link"><img alt=Discord class=svg-icon src=https://machengine.org/next/img/discord.svg></a></div></div></div><div class="alert warning"><span><strong>HEY YOU!</strong> We're still working on this site, please don't share it in very public places :)</span></div><div id=content><link rel=stylesheet href=https://machengine.org/next/layouts/docs.04e3792847046e165154a56a0c74cf6d9da9f84f6366d0d6e94cd8e19e191197.css><main aria-role=main class=main-docs><aside><ul><li><a href=https://machengine.org/next/core><span>Core overview</span></a></li><li><a href=https://machengine.org/next/core/examples><span>Examples</span></a></li><li><a href=https://machengine.org/next/core/getting-started><span>Getting started</span></a></li><li><a href=https://machengine.org/next/core/migrations><span>Migrations</span></a></li><li><a href=https://machengine.org/next/about/known-issues><span>Known issues â®•</span></a></li></ul></aside><div class=docs><h1 id=getting-started-with-_mach-core_>Getting Started with <em>Mach core</em></h1><p>Here you will learn how to use <em>mach-core</em> in your own project/repository. If you haven&rsquo;t already, check out the <a href=../examples>examples</a> as those describe how to actually use Mach core&rsquo;s APIs, this page just describes project setup.</p><h2 id=mach-is-now-using-the-zig-package-manager>Mach is now using the Zig package manager</h2><p><em>Note: Mach has recently been updated to make use of the <em>experimental Zig package manager</em>, although it cannot yet be used for all our dependencies due to some bugs with it. You will need to use both some Git submodules and a <code>build.zig.zon</code> file for the Zig package manager.</em></p><p><em>This process is a little bit rough today, but we&rsquo;ll walk you through it and are working on improving it.</em></p><h2 id=creating-a-new-project>Creating a new project</h2><h3 id=create-zig-project>Create Zig project</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>mkdir myproject/
cd myproject/
git init
zig init-exe
</code></pre></div><h3 id=add-dependencies>Add dependencies</h3><p>Add mach-core and its dependencies as submodules:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>git submodule add https://github.com/hexops/mach-core libs/mach-core
git submodule add https://github.com/hexops/mach-gpu libs/mach-gpu
git submodule add https://github.com/hexops/mach-gpu-dawn libs/mach-gpu-dawn
git submodule update --init --recursive
</code></pre></div><h3 id=create-buildzigzon-dependency-file>Create build.zig.zon dependency file</h3><p>Copy <a href=https://github.com/hexops/mach-core/blob/main/build.zig.zon>mach-core&rsquo;s build.zig.zon</a> file into your project, next to your <code>build.zig</code>.</p><h3 id=setup-buildzig>Setup build.zig</h3><p>Your <code>build.zig</code> file will need to use <code>mach.App</code> to declare how your application should be built. Your <code>build.zig</code> should look something like this:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zig data-lang=zig><span style=color:#66d9ef>const</span> std <span style=color:#f92672>=</span> @import(<span style=color:#e6db74>&#34;std&#34;</span>);
<span style=color:#66d9ef>const</span> mach_gpu_dawn <span style=color:#f92672>=</span> @import(<span style=color:#e6db74>&#34;libs/mach-gpu-dawn/build.zig&#34;</span>);
<span style=color:#66d9ef>const</span> mach_gpu <span style=color:#f92672>=</span> @import(<span style=color:#e6db74>&#34;libs/mach-gpu/build.zig&#34;</span>).Sdk(.{
    .gpu_dawn <span style=color:#f92672>=</span> mach_gpu_dawn,
});
<span style=color:#66d9ef>const</span> mach_core <span style=color:#f92672>=</span> @import(<span style=color:#e6db74>&#34;libs/mach-core/build.zig&#34;</span>).Sdk(.{
    .gpu_dawn <span style=color:#f92672>=</span> mach_gpu_dawn,
    .gpu <span style=color:#f92672>=</span> mach_gpu,
});

<span style=color:#66d9ef>pub</span> <span style=color:#66d9ef>fn</span> build(b<span style=color:#f92672>:</span> <span style=color:#f92672>*</span>std.Build) <span style=color:#f92672>!</span><span style=color:#66d9ef>void</span> {
    <span style=color:#66d9ef>const</span> target <span style=color:#f92672>=</span> b.standardTargetOptions(.{});
    <span style=color:#66d9ef>const</span> optimize <span style=color:#f92672>=</span> b.standardOptimizeOption(.{});

    <span style=color:#66d9ef>const</span> app <span style=color:#f92672>=</span> <span style=color:#66d9ef>try</span> mach_core.App.init(b, .{
        .name <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;myapp&#34;</span>,
        .src <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;src/main.zig&#34;</span>,
        .target <span style=color:#f92672>=</span> target,
        .deps <span style=color:#f92672>=</span> <span style=color:#f92672>&amp;</span>[_]std.build.ModuleDependency{},
        .optimize <span style=color:#f92672>=</span> optimize,
    });

    <span style=color:#66d9ef>if</span> (b.args) <span style=color:#f92672>|</span>args<span style=color:#f92672>|</span> {
        app.run_step.addArgs(args);
    }
    <span style=color:#66d9ef>const</span> run_step <span style=color:#f92672>=</span> b.step(<span style=color:#e6db74>&#34;run&#34;</span>, <span style=color:#e6db74>&#34;Run the app&#34;</span>);
    run_step.dependOn(<span style=color:#f92672>&amp;</span>app.run.step);

    <span style=color:#66d9ef>const</span> unit_tests <span style=color:#f92672>=</span> b.addTest(.{
        .root_source_file <span style=color:#f92672>=</span> .{ .path <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;src/main.zig&#34;</span> },
        .target <span style=color:#f92672>=</span> target,
        .optimize <span style=color:#f92672>=</span> optimize,
    });
    <span style=color:#66d9ef>const</span> run_unit_tests <span style=color:#f92672>=</span> b.addRunArtifact(unit_tests);
    <span style=color:#66d9ef>const</span> test_step <span style=color:#f92672>=</span> b.step(<span style=color:#e6db74>&#34;test&#34;</span>, <span style=color:#e6db74>&#34;Run unit tests&#34;</span>);
    test_step.dependOn(<span style=color:#f92672>&amp;</span>run_unit_tests.step);
}
</code></pre></div><h3 id=add-example-code>Add example code</h3><p>To begin coding your project, we suggesting copying the two files from the <code>triangle</code> example into your <code>src/</code> folder:</p><ul><li><a href=https://raw.githubusercontent.com/hexops/mach-core/main/examples/triangle/main.zig><code>main.zig</code></a></li><li><a href=https://raw.githubusercontent.com/hexops/mach-core/main/examples/triangle/shader.wgsl><code>shader.wgsl</code></a></li></ul><h2 id=building-your-project>Building your project</h2><h3 id=build--run--unit-test>Build / run / unit test</h3><p>Build your app (executable will go into <code>zig-out/bin/</code>):</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>zig build
</code></pre></div><p>Build and run your app (useful while developing):</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>zig build run
</code></pre></div><p>Run <a href=https://ziglang.org/documentation/master/#Zig-Test>unit tests</a>:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>zig build test
</code></pre></div><h3 id=cross-compile>Cross-compile</h3><p>You should now be able to cross-compile to every desktop OS using:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>zig build -Dtarget<span style=color:#f92672>=</span>x86_64-windows
zig build -Dtarget<span style=color:#f92672>=</span>x86_64-linux-gnu
zig build -Dtarget<span style=color:#f92672>=</span>x86_64-macos
zig build -Dtarget<span style=color:#f92672>=</span>aarch64-macos
</code></pre></div><h3 id=run-in-the-browser>Run in the browser</h3><p>Mach doesn&rsquo;t yet support <em>graphics</em> in the browser (<a href=https://github.com/hexops/mach/issues/90>issue #90</a>), but windowing, input, and audio all work already - as well as a nice dev server CLI we have. We&rsquo;re actively collaborating on building browser support in the <code>#wasm</code> channel in <a href=https://machengine.org/next/discord>Discord</a> and will update this section once it is ready.</p><h2 id=questions-ran-into-an-issue>Questions? Ran into an issue?</h2><p>There are two ways to get help:</p><ul><li><a href=https://github.com/hexops/mach/issues>File a GitHub issue</a></li><li><a href=https://machengine.org/next/discord>Join our Discord</a> and create a thread in <code>#help</code></li></ul></div><div class=toc><h3>Table of contents</h3><nav id=TableOfContents><ul><li><a href=#mach-is-now-using-the-zig-package-manager>Mach is now using the Zig package manager</a></li><li><a href=#creating-a-new-project>Creating a new project</a><ul><li><a href=#create-zig-project>Create Zig project</a></li><li><a href=#add-dependencies>Add dependencies</a></li><li><a href=#create-buildzigzon-dependency-file>Create build.zig.zon dependency file</a></li><li><a href=#setup-buildzig>Setup build.zig</a></li><li><a href=#add-example-code>Add example code</a></li></ul></li><li><a href=#building-your-project>Building your project</a><ul><li><a href=#build--run--unit-test>Build / run / unit test</a></li><li><a href=#cross-compile>Cross-compile</a></li><li><a href=#run-in-the-browser>Run in the browser</a></li></ul></li><li><a href=#questions-ran-into-an-issue>Questions? Ran into an issue?</a></li></ul></nav></div></main><div class=footer><a href=https://hexops.com/privacy>Privacy matters</a><p><a href=https://machengine.org/next/about#improve-this-site>Improve this site</a> | <a href=https://github.com/sponsors/slimsag>Sponsor on GitHub</a> | <a href=https://devlog.hexops.com/>Hexops' devlog</a></p></div></div></body></html>